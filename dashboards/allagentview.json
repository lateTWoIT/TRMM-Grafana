{
    "annotations": {
      "list": [
        {
          "builtIn": 1,
          "datasource": {
            "type": "datasource",
            "uid": "grafana"
          },
          "enable": true,
          "hide": true,
          "iconColor": "rgba(0, 211, 255, 1)",
          "name": "Annotations & Alerts",
          "target": {
            "limit": 100,
            "matchAny": false,
            "tags": [],
            "type": "dashboard"
          },
          "type": "dashboard"
        }
      ]
    },
    "editable": true,
    "fiscalYearStartMonth": 0,
    "graphTooltip": 0,
    "id": 9,
    "links": [
      {
        "asDropdown": false,
        "icon": "external link",
        "includeVars": true,
        "keepTime": false,
        "tags": [
          "TRMMClientOverview"
        ],
        "targetBlank": false,
        "title": "T-RMM Client Overview",
        "tooltip": "",
        "type": "dashboards",
        "url": ""
      },
      {
        "asDropdown": false,
        "icon": "external link",
        "includeVars": true,
        "keepTime": false,
        "tags": [
          "TRMMClientMap"
        ],
        "targetBlank": false,
        "title": "T-RMM Client Map",
        "tooltip": "",
        "type": "dashboards",
        "url": ""
      }
    ],
    "liveNow": false,
    "panels": [
      {
        "collapsed": false,
        "datasource": {
          "type": "postgres",
          "uid": "${Tactical}"
        },
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 0
        },
        "id": 47,
        "panels": [],
        "title": "Information on Client or selected site",
        "type": "row"
      },
      {
        "datasource": {
          "type": "postgres",
          "uid": "${Tactical}"
        },
        "description": "Agents at selected clients/sites",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 2,
          "x": 0,
          "y": 1
        },
        "id": 31,
        "options": {
          "colorMode": "none",
          "graphMode": "none",
          "justifyMode": "center",
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "text": {
            "valueSize": 48
          },
          "textMode": "auto"
        },
        "pluginVersion": "9.4.7",
        "targets": [
          {
            "datasource": {
              "type": "postgres",
              "uid": "${Tactical}"
            },
            "format": "table",
            "group": [],
            "metricColumn": "none",
            "rawQuery": true,
            "rawSql": "SELECT\n  count(*)\nFROM agents_agent\nwhere \n  site_id IN (SELECT id FROM clients_site WHERE site_id IN (SELECT id FROM clients_site WHERE name IN ($Sites))) and\n  site_id IN (SELECT id FROM clients_site WHERE client_id IN (SELECT id FROM clients_client WHERE name IN ($Client)))\nORDER BY 1",
            "refId": "A",
            "select": [
              [
                {
                  "params": [
                    "boot_time"
                  ],
                  "type": "column"
                }
              ]
            ],
            "table": "agents_agent",
            "timeColumn": "last_seen",
            "timeColumnType": "timestamp",
            "where": [
              {
                "name": "$__timeFilter",
                "params": [],
                "type": "macro"
              }
            ]
          }
        ],
        "title": "Agents",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "postgres",
          "uid": "${Tactical}"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "transparent",
                  "value": null
                },
                {
                  "color": "dark-blue",
                  "value": 1
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 6,
          "x": 2,
          "y": 1
        },
        "id": 24,
        "options": {
          "colorMode": "background",
          "graphMode": "none",
          "justifyMode": "auto",
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "/^concat$/",
            "values": false
          },
          "text": {
            "valueSize": 48
          },
          "textMode": "auto"
        },
        "pluginVersion": "9.4.7",
        "targets": [
          {
            "datasource": {
              "type": "postgres",
              "uid": "${Tactical}"
            },
            "format": "table",
            "group": [],
            "metricColumn": "none",
            "rawQuery": true,
            "rawSql": "SELECT CONCAT(\n  (SELECT\n    count(*)\n  FROM\n    alerts_alert\n    LEFT JOIN checks_check on alerts_alert.assigned_check_id = checks_check.id\n    LEFT JOIN autotasks_automatedtask on alerts_alert.assigned_task_id = autotasks_automatedtask.id\n    INNER JOIN agents_agent ON autotasks_automatedtask.agent_id = agents_agent.id\n    OR checks_check.agent_id = agents_agent.id\n    OR alerts_alert.agent_id = agents_agent.id\n    INNER JOIN clients_site ON agents_agent.site_id = clients_site.id\n    INNER JOIN clients_client ON clients_site.client_id = clients_client.id\n  WHERE\n    clients_client.name IN ($Client)\n    AND clients_site.name IN ($Sites)\n    AND alerts_alert.severity = 'info'\n    AND alerts_alert.resolved = false\n  ),\n  ' / ',\n  (SELECT\n    count(*)\n  FROM\n    alerts_alert\n  WHERE\n    alerts_alert.severity = 'info'\n    AND alerts_alert.resolved = false\n  )\n)",
            "refId": "A",
            "select": [
              [
                {
                  "params": [
                    "boot_time"
                  ],
                  "type": "column"
                }
              ]
            ],
            "table": "agents_agent",
            "timeColumn": "last_seen",
            "timeColumnType": "timestamp",
            "where": [
              {
                "name": "$__timeFilter",
                "params": [],
                "type": "macro"
              }
            ]
          }
        ],
        "title": "Information Alerts",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "postgres",
          "uid": "${Tactical}"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "transparent",
                  "value": null
                },
                {
                  "color": "yellow",
                  "value": 1
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 8,
          "x": 8,
          "y": 1
        },
        "id": 20,
        "options": {
          "colorMode": "background",
          "graphMode": "none",
          "justifyMode": "auto",
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "/^concat$/",
            "values": false
          },
          "text": {
            "valueSize": 48
          },
          "textMode": "auto"
        },
        "pluginVersion": "9.4.7",
        "targets": [
          {
            "datasource": {
              "type": "postgres",
              "uid": "${Tactical}"
            },
            "format": "table",
            "group": [],
            "metricColumn": "none",
            "rawQuery": true,
            "rawSql": "SELECT CONCAT(\n  (SELECT\n    count(*)\n  FROM\n    alerts_alert\n    LEFT JOIN checks_check on alerts_alert.assigned_check_id = checks_check.id\n    LEFT JOIN autotasks_automatedtask on alerts_alert.assigned_task_id = autotasks_automatedtask.id\n    INNER JOIN agents_agent ON autotasks_automatedtask.agent_id = agents_agent.id\n    OR checks_check.agent_id = agents_agent.id\n    OR alerts_alert.agent_id = agents_agent.id\n    INNER JOIN clients_site ON agents_agent.site_id = clients_site.id\n    INNER JOIN clients_client ON clients_site.client_id = clients_client.id\n  WHERE\n    clients_client.name IN ($Client)\n    AND clients_site.name IN ($Sites)\n    AND alerts_alert.severity = 'warning'\n    AND alerts_alert.resolved = false\n  ),\n  ' / ',\n  (SELECT\n    count(*)\n  FROM\n    alerts_alert\n  WHERE\n    alerts_alert.severity = 'warning'\n    AND alerts_alert.resolved = false\n  )\n)",
            "refId": "A",
            "select": [
              [
                {
                  "params": [
                    "boot_time"
                  ],
                  "type": "column"
                }
              ]
            ],
            "table": "agents_agent",
            "timeColumn": "last_seen",
            "timeColumnType": "timestamp",
            "where": [
              {
                "name": "$__timeFilter",
                "params": [],
                "type": "macro"
              }
            ]
          }
        ],
        "title": "Warning Alerts",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "postgres",
          "uid": "${Tactical}"
        },
        "description": "",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "transparent",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 1
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 8,
          "x": 16,
          "y": 1
        },
        "id": 23,
        "options": {
          "colorMode": "background",
          "graphMode": "none",
          "justifyMode": "auto",
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "/^concat$/",
            "values": false
          },
          "text": {},
          "textMode": "auto"
        },
        "pluginVersion": "9.4.7",
        "targets": [
          {
            "datasource": {
              "type": "postgres",
              "uid": "${Tactical}"
            },
            "format": "table",
            "group": [],
            "metricColumn": "none",
            "rawQuery": true,
            "rawSql": "SELECT CONCAT(\n  (SELECT\n    count(*)\n  FROM\n    alerts_alert\n    LEFT JOIN checks_check on alerts_alert.assigned_check_id = checks_check.id\n    LEFT JOIN autotasks_automatedtask on alerts_alert.assigned_task_id = autotasks_automatedtask.id\n    INNER JOIN agents_agent ON autotasks_automatedtask.agent_id = agents_agent.id\n    OR checks_check.agent_id = agents_agent.id\n    OR alerts_alert.agent_id = agents_agent.id\n    INNER JOIN clients_site ON agents_agent.site_id = clients_site.id\n    INNER JOIN clients_client ON clients_site.client_id = clients_client.id\n  WHERE\n    clients_client.name IN ($Client)\n    AND clients_site.name IN ($Sites)\n    AND alerts_alert.severity = 'error'\n    AND alerts_alert.resolved = false\n  ),\n  ' / ',\n  (SELECT\n    count(*)\n  FROM\n    alerts_alert\n  WHERE\n    alerts_alert.severity = 'error'\n    AND alerts_alert.resolved = false\n  )\n)",
            "refId": "A",
            "select": [
              [
                {
                  "params": [
                    "boot_time"
                  ],
                  "type": "column"
                }
              ]
            ],
            "table": "agents_agent",
            "timeColumn": "last_seen",
            "timeColumnType": "timestamp",
            "where": [
              {
                "name": "$__timeFilter",
                "params": [],
                "type": "macro"
              }
            ]
          }
        ],
        "title": "Error Alerts",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "postgres",
          "uid": "${Tactical}"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "custom": {
              "align": "center",
              "cellOptions": {
                "type": "auto"
              },
              "inspect": false
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "none"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "64 Bit"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 149
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 8,
          "w": 4,
          "x": 0,
          "y": 4
        },
        "id": 18,
        "options": {
          "footer": {
            "countRows": false,
            "fields": "",
            "reducer": [
              "sum"
            ],
            "show": false
          },
          "showHeader": true,
          "sortBy": []
        },
        "pluginVersion": "9.4.7",
        "targets": [
          {
            "datasource": {
              "type": "postgres",
              "uid": "${Tactical}"
            },
            "format": "table",
            "group": [],
            "metricColumn": "none",
            "rawQuery": true,
            "rawSql": "  select (\r\nSELECT\r\n  count(*)\r\n  FROM agents_agent\r\nWhere\r\n  SUBSTRING(agents_agent.operating_system,POSITION(',' in agents_agent.operating_system)+2,2) = '64' and\r\n  site_id IN (SELECT id FROM clients_site WHERE site_id IN (SELECT id FROM clients_site WHERE name IN ($Sites))) and\r\n  site_id IN (SELECT id FROM clients_site WHERE client_id IN (SELECT id FROM clients_client WHERE name IN ($Client)))) as \"64 Bit\",\r\n\r\n  (SELECT\r\n  count(*)\r\n  FROM agents_agent\r\nWhere\r\n  SUBSTRING(agents_agent.operating_system,POSITION(',' in agents_agent.operating_system)+2,2) = '32' and\r\n   site_id IN (SELECT id FROM clients_site WHERE site_id IN (SELECT id FROM clients_site WHERE name IN ($Sites))) and\r\n  site_id IN (SELECT id FROM clients_site WHERE client_id IN (SELECT id FROM clients_client WHERE name IN ($Client)))) as \"32 Bit\" ",
            "refId": "A",
            "select": [
              [
                {
                  "params": [
                    "boot_time"
                  ],
                  "type": "column"
                }
              ]
            ],
            "table": "agents_agent",
            "timeColumn": "last_seen",
            "timeColumnType": "timestamp",
            "where": [
              {
                "name": "$__timeFilter",
                "params": [],
                "type": "macro"
              }
            ]
          }
        ],
        "title": "OS Distribution",
        "type": "table"
      },
      {
        "datasource": {
          "type": "postgres",
          "uid": "${Tactical}"
        },
        "description": "List all OS installed",
        "fieldConfig": {
          "defaults": {
            "color": {
              "fixedColor": "semi-dark-green",
              "mode": "fixed"
            },
            "custom": {
              "align": "center",
              "cellOptions": {
                "type": "auto"
              },
              "inspect": false
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                }
              ]
            }
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "Operating System"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 293
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 8,
          "w": 6,
          "x": 4,
          "y": 4
        },
        "id": 26,
        "options": {
          "footer": {
            "countRows": false,
            "fields": "",
            "reducer": [
              "sum"
            ],
            "show": false
          },
          "showHeader": true,
          "sortBy": []
        },
        "pluginVersion": "9.4.7",
        "targets": [
          {
            "datasource": {
              "type": "postgres",
              "uid": "${Tactical}"
            },
            "format": "table",
            "group": [],
            "metricColumn": "none",
            "rawQuery": true,
            "rawSql": "SELECT \r\n  count(*) as \"count\",\r\n  SUBSTRING(agents_agent.operating_system,'(.*)(?:,|x86_64)') AS \"Operating System\"\r\nFROM agents_agent\r\n  INNER JOIN clients_site ON agents_agent.site_id = clients_site.id\r\n  INNER JOIN clients_client ON clients_site.client_id = clients_client.id\r\nWHERE\r\n  clients_client.name IN ($Client)\r\n  AND clients_site.name IN ($Sites)\r\nGroup by \"Operating System\"\r\nOrder by \"count\" desc\r\n  ",
            "refId": "A",
            "select": [
              [
                {
                  "params": [
                    "boot_time"
                  ],
                  "type": "column"
                }
              ]
            ],
            "table": "agents_agent",
            "timeColumn": "last_seen",
            "timeColumnType": "timestamp",
            "where": [
              {
                "name": "$__timeFilter",
                "params": [],
                "type": "macro"
              }
            ]
          }
        ],
        "title": "OS Type",
        "transformations": [
          {
            "id": "organize",
            "options": {
              "excludeByName": {},
              "indexByName": {
                "Operating System": 0,
                "count": 1
              },
              "renameByName": {}
            }
          }
        ],
        "type": "table"
      },
      {
        "datasource": {
          "type": "postgres",
          "uid": "${Tactical}"
        },
        "description": "",
        "fieldConfig": {
          "defaults": {
            "color": {
              "fixedColor": "semi-dark-green",
              "mode": "fixed"
            },
            "custom": {
              "align": "center",
              "cellOptions": {
                "type": "auto"
              },
              "inspect": false
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                }
              ]
            }
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "CPU Name"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 377
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 8,
          "w": 7,
          "x": 10,
          "y": 4
        },
        "id": 54,
        "options": {
          "footer": {
            "countRows": false,
            "fields": "",
            "reducer": [
              "sum"
            ],
            "show": false
          },
          "showHeader": true,
          "sortBy": []
        },
        "pluginVersion": "9.4.7",
        "targets": [
          {
            "datasource": {
              "type": "postgres",
              "uid": "${Tactical}"
            },
            "format": "table",
            "group": [],
            "metricColumn": "none",
            "rawQuery": true,
            "rawSql": "SELECT \n    count(*) as \"count\",\n    (CASE \n      WHEN wmi_detail->'cpu' IS NOT NULL\n      THEN SUBSTRING(agents_agent.wmi_detail->'cpu'->0->0->>'Name','(?:AMD|Intel\\(R\\)|Intel)(.*)(?:@|Processor|with)')\n      ELSE SUBSTRING(agents_agent.wmi_detail->'cpus'->>0,'(?:AMD|Intel\\(R\\)|Intel)(.*)(?:@|Processor|with)')\n    END) as \"CPU Name\"\nFROM agents_agent\n    INNER JOIN clients_site ON agents_agent.site_id = clients_site.id\n    INNER JOIN clients_client ON clients_site.client_id = clients_client.id\nWHERE\n  clients_client.name IN ($Client)\n  AND clients_site.name IN ($Sites)\nGroup by \"CPU Name\"\nOrder by \"count\" desc",
            "refId": "A",
            "select": [
              [
                {
                  "params": [
                    "boot_time"
                  ],
                  "type": "column"
                }
              ]
            ],
            "table": "agents_agent",
            "timeColumn": "last_seen",
            "timeColumnType": "timestamp",
            "where": [
              {
                "name": "$__timeFilter",
                "params": [],
                "type": "macro"
              }
            ]
          }
        ],
        "title": "Type of CPUs",
        "transformations": [
          {
            "id": "organize",
            "options": {
              "excludeByName": {},
              "indexByName": {
                "CPU Name": 0,
                "count": 1
              },
              "renameByName": {}
            }
          }
        ],
        "type": "table"
      },
      {
        "datasource": {
          "type": "postgres",
          "uid": "${Tactical}"
        },
        "description": "List all installed memory",
        "fieldConfig": {
          "defaults": {
            "color": {
              "fixedColor": "semi-dark-green",
              "mode": "fixed"
            },
            "custom": {
              "align": "center",
              "cellOptions": {
                "type": "auto"
              },
              "inspect": false
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                }
              ]
            }
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "Size Memory"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 377
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 8,
          "w": 7,
          "x": 17,
          "y": 4
        },
        "id": 55,
        "options": {
          "footer": {
            "countRows": false,
            "fields": "",
            "reducer": [
              "sum"
            ],
            "show": false
          },
          "showHeader": true
        },
        "pluginVersion": "9.4.7",
        "targets": [
          {
            "datasource": {
              "type": "postgres",
              "uid": "${Tactical}"
            },
            "format": "table",
            "group": [],
            "metricColumn": "none",
            "rawQuery": true,
            "rawSql": "  SELECT \r\n  count(*) as \"count\",\r\n  concat((total_ram),' GB') as \"Size Memory\"\r\n  FROM agents_agent\r\nINNER JOIN clients_site on site_id = clients_site.id\r\nWHERE site_id IN (SELECT id FROM clients_site WHERE client_id IN (SELECT id FROM clients_client WHERE name IN ($Client)))\r\nAND site_id IN (SELECT id FROM clients_site WHERE site_id IN (SELECT id FROM clients_site WHERE name IN ($Sites)))\r\nGroup by \"Size Memory\"\r\nOrder by \"count\" desc\r\n  ",
            "refId": "A",
            "select": [
              [
                {
                  "params": [
                    "boot_time"
                  ],
                  "type": "column"
                }
              ]
            ],
            "table": "agents_agent",
            "timeColumn": "last_seen",
            "timeColumnType": "timestamp",
            "where": [
              {
                "name": "$__timeFilter",
                "params": [],
                "type": "macro"
              }
            ]
          }
        ],
        "title": "Installed System RAM",
        "transformations": [
          {
            "id": "organize",
            "options": {
              "excludeByName": {},
              "indexByName": {
                "Size Memory": 0,
                "count": 1
              },
              "renameByName": {}
            }
          }
        ],
        "type": "table"
      },
      {
        "datasource": {
          "type": "postgres",
          "uid": "${Tactical}"
        },
        "description": "",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "custom": {
              "align": "center",
              "cellOptions": {
                "mode": "basic",
                "type": "color-background"
              },
              "inspect": false
            },
            "mappings": [
              {
                "options": {
                  "Offline": {
                    "color": "red",
                    "index": 1,
                    "text": "X"
                  },
                  "Online": {
                    "color": "green",
                    "index": 0,
                    "text": "O"
                  }
                },
                "type": "value"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "transparent",
                  "value": null
                }
              ]
            }
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "Site"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 125
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Last Reboot"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 195
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Last Response"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 195
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Hostname"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 135
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "agent_id"
              },
              "properties": [
                {
                  "id": "custom.hidden",
                  "value": true
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "RMM"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 50
                },
                {
                  "id": "links",
                  "value": [
                    {
                      "targetBlank": true,
                      "title": "Open RMM",
                      "url": "https://${TacticalURL}/agents/${__data.fields.agent_id}"
                    }
                  ]
                },
                {
                  "id": "custom.cellOptions",
                  "value": {
                    "type": "image"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Stats"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 50
                },
                {
                  "id": "custom.cellOptions",
                  "value": {
                    "type": "image"
                  }
                },
                {
                  "id": "links",
                  "value": [
                    {
                      "targetBlank": false,
                      "title": "Agent Dashboard",
                      "url": "https://${GrafanaURL}/d/pLkA1-inz/t-rmm-agent-dashboard?orgId=1&var-Agent=${__data.fields.Hostname}﻿&var-Sites=﻿${__data.fields.Site}"
                    }
                  ]
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Status"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 87
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 13,
          "w": 11,
          "x": 0,
          "y": 12
        },
        "id": 14,
        "options": {
          "footer": {
            "countRows": false,
            "fields": "",
            "reducer": [
              "sum"
            ],
            "show": false
          },
          "showHeader": true,
          "sortBy": []
        },
        "pluginVersion": "9.4.7",
        "targets": [
          {
            "datasource": {
              "type": "postgres",
              "uid": "${Tactical}"
            },
            "format": "table",
            "group": [],
            "metricColumn": "none",
            "rawQuery": true,
            "rawSql": "SELECT \n  clients_site.name AS \"Site\",\n  hostname AS \"Hostname\",\n  agents_agent.agent_id,\n  'https://docs.tacticalrmm.com/images/favicon.ico' as \"RMM\",\n  'https://grafana.com/static/assets/img/fav32.png' as \"Stats\",\n  (\n        CASE\n            WHEN last_seen > NOW() - interval '1 minute' THEN 'Online'\n            ELSE 'Offline'\n        END\n    ) AS \"Status\",\n  last_seen as \"Last Response\",\n  to_timestamp(boot_time) AS \"Last Reboot\"\nFROM agents_agent\n    INNER JOIN clients_site ON agents_agent.site_id = clients_site.id\n    INNER JOIN clients_client ON clients_site.client_id = clients_client.id\nWHERE\n    clients_client.name IN ($Client)\n    AND clients_site.name IN ($Sites)",
            "refId": "A",
            "select": [
              [
                {
                  "params": [
                    "boot_time"
                  ],
                  "type": "column"
                }
              ]
            ],
            "table": "agents_agent",
            "timeColumn": "last_seen",
            "timeColumnType": "timestamp",
            "where": [
              {
                "name": "$__timeFilter",
                "params": [],
                "type": "macro"
              }
            ]
          }
        ],
        "title": "Agent Status",
        "type": "table"
      },
      {
        "datasource": {
          "type": "postgres",
          "uid": "${Tactical}"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "custom": {
              "align": "auto",
              "cellOptions": {
                "type": "auto"
              },
              "inspect": false
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "Date"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 155
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "agent_id"
              },
              "properties": [
                {
                  "id": "custom.hidden",
                  "value": true
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "RMM"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 45
                },
                {
                  "id": "links",
                  "value": [
                    {
                      "targetBlank": true,
                      "title": "Open RMM",
                      "url": "https://${TacticalURL}/agents/${__data.fields.agent_id}"
                    }
                  ]
                },
                {
                  "id": "custom.cellOptions",
                  "value": {
                    "type": "image"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Message"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 787
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 13,
          "w": 13,
          "x": 11,
          "y": 12
        },
        "id": 66,
        "options": {
          "footer": {
            "countRows": false,
            "fields": "",
            "reducer": [
              "sum"
            ],
            "show": false
          },
          "showHeader": true,
          "sortBy": []
        },
        "pluginVersion": "9.4.7",
        "targets": [
          {
            "datasource": {
              "type": "postgres",
              "uid": "${Tactical}"
            },
            "format": "table",
            "group": [],
            "metricColumn": "none",
            "rawQuery": true,
            "rawSql": "SELECT \n    alerts_alert.alert_time as \"Date\",\n    alerts_alert.message as \"Message\",\n    agents_agent.agent_id,\n    'https://docs.tacticalrmm.com/images/favicon.ico' as \"RMM\"\nFROM alerts_alert\n    LEFT JOIN checks_check on alerts_alert.assigned_check_id = checks_check.id\n    LEFT JOIN autotasks_automatedtask on alerts_alert.assigned_task_id = autotasks_automatedtask.id\n    INNER JOIN agents_agent ON autotasks_automatedtask.agent_id = agents_agent.id\n                            OR checks_check.agent_id = agents_agent.id\n                            OR alerts_alert.agent_id = agents_agent.id\n    INNER JOIN clients_site ON agents_agent.site_id = clients_site.id\n    INNER JOIN clients_client ON clients_site.client_id = clients_client.id\nWHERE\n  clients_client.name IN ($Client)\n  AND clients_site.name IN ($Sites)\n  AND alerts_alert.severity = 'error' \n  AND alerts_alert.resolved = false",
            "refId": "A",
            "select": [
              [
                {
                  "params": [
                    "boot_time"
                  ],
                  "type": "column"
                }
              ]
            ],
            "table": "agents_agent",
            "timeColumn": "last_seen",
            "timeColumnType": "timestamp",
            "where": [
              {
                "name": "$__timeFilter",
                "params": [],
                "type": "macro"
              }
            ]
          }
        ],
        "title": "Error Messages",
        "type": "table"
      },
      {
        "datasource": {
          "type": "postgres",
          "uid": "${Tactical}"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "custom": {
              "align": "left",
              "cellOptions": {
                "type": "auto"
              },
              "filterable": true,
              "inspect": true
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "Date"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 155
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "agent_id"
              },
              "properties": [
                {
                  "id": "custom.hidden",
                  "value": true
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "RMM"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 50
                },
                {
                  "id": "links",
                  "value": [
                    {
                      "targetBlank": true,
                      "title": "Open RMM",
                      "url": "https://${TacticalURL}/agents/${__data.fields.agent_id}"
                    }
                  ]
                },
                {
                  "id": "custom.cellOptions",
                  "value": {
                    "type": "image"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Message"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 787
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 13,
          "w": 24,
          "x": 0,
          "y": 25
        },
        "id": 64,
        "options": {
          "footer": {
            "countRows": false,
            "enablePagination": true,
            "fields": "",
            "reducer": [
              "sum"
            ],
            "show": false
          },
          "showHeader": true,
          "sortBy": []
        },
        "pluginVersion": "9.4.7",
        "targets": [
          {
            "datasource": {
              "type": "postgres",
              "uid": "${Tactical}"
            },
            "editorMode": "code",
            "format": "table",
            "group": [],
            "metricColumn": "none",
            "rawQuery": true,
            "rawSql": "SELECT \r\n  CONCAT(\r\n    'Computer - ',\r\n    agents_agent.hostname,' ',agents_agent.DESCRIPTION,' -  '\r\n    'Software - ',\r\n    jsonb_array_elements(software) -> 'name',\r\n    ' - Version - ',\r\n    jsonb_array_elements(software) -> 'version',\r\n     '  - Uninstall   -',\r\n    jsonb_array_elements(software) -> 'uninstall' \r\n  ) AS \"All Software\"\r\nFROM software_installedsoftware, agents_agent  \r\n\r\nWHERE software_installedsoftware.agent_id=agents_agent.id\r\n  LIMIT ALL",
            "refId": "A",
            "select": [
              [
                {
                  "params": [
                    "boot_time"
                  ],
                  "type": "column"
                }
              ]
            ],
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            },
            "table": "agents_agent",
            "timeColumn": "last_seen",
            "timeColumnType": "timestamp",
            "where": [
              {
                "name": "$__timeFilter",
                "params": [],
                "type": "macro"
              }
            ]
          }
        ],
        "title": "All Software",
        "type": "table"
      }
    ],
    "refresh": "",
    "revision": 1,
    "schemaVersion": 38,
    "style": "dark",
    "tags": [
      "TRMMAgentDashboard"
    ],
    "templating": {
      "list": [
        {
          "current": {
            "selected": false,
            "text": "TacticalRMM",
            "value": "TacticalRMM"
          },
          "hide": 2,
          "includeAll": false,
          "multi": false,
          "name": "Tactical",
          "options": [],
          "query": "postgres",
          "refresh": 1,
          "regex": "TacticalRMM",
          "skipUrlSync": false,
          "type": "datasource"
        },
        {
          "current": {
            "selected": false,
            "text": "rmm.example.com",
            "value": "rmm.example.com"
          },
          "hide": 0,
          "includeAll": false,
          "multi": false,
          "name": "TacticalURL",
          "options": [
            {
              "selected": true,
              "text": "rmm.example.com",
              "value": "rmm.example.com"
            }
          ],
          "query": "rmm.example.com",
          "queryValue": "",
          "skipUrlSync": false,
          "type": "custom"
        },
        {
          "current": {
            "selected": false,
            "text": "grafana.example.com",
            "value": "grafana.example.com"
          },
          "hide": 0,
          "includeAll": false,
          "multi": false,
          "name": "GrafanaURL",
          "options": [
            {
              "selected": true,
              "text": "grafana.example.com",
              "value": "grafana.example.com"
            }
          ],
          "query": "grafana.example.com",
          "queryValue": "",
          "skipUrlSync": false,
          "type": "custom"
        }
      ]
    },
    "time": {
      "from": "now-12h",
      "to": "now"
    },
    "timepicker": {
      "hidden": false
    },
    "timezone": "",
    "title": "T-RMM Dashboard with Software",
    "uid": "pLkA4-inz",
    "version": 12,
    "weekStart": ""
  }